(function(b){function a(e,c){var f=function(d){d=b[e][d]||[];return typeof d=="string"?d.split(/,?\s+/):d}("getter");return b.inArray(c,f)!=-1}b.fn.jPlayer=function(f){var c=typeof f=="string",h=Array.prototype.slice.call(arguments,1);if(c&&f.substring(0,1)=="_"){return this}if(c&&a("jPlayer",f,h)){var g=b.data(this[0],"jPlayer");return g?g[f].apply(g,h):undefined}return this.each(function(){var d=b.data(this,"jPlayer");!d&&!c&&b.data(this,"jPlayer",new b.jPlayer(this,f))._init();d&&c&&b.isFunction(d[f])&&d[f].apply(d,h)})};b.jPlayer=function(d,c){this.options=b.extend({},c);this.element=b(d)};b.jPlayer.getter="jPlayerOnProgressChange jPlayerOnSoundComplete jPlayerVolume jPlayerReady getData jPlayerController";b.jPlayer.defaults={cssPrefix:"jqjp",swfPath:"js",volume:80,oggSupport:false,nativeSupport:true,preload:"none",customCssIds:false,graphicsFix:true,errorAlerts:false,warningAlerts:false,position:"absolute",width:"0",height:"0",top:"0",left:"0",quality:"high",bgcolor:"#ffffff"};b.jPlayer._config={version:"1.2.0",swfVersionRequired:"1.2.0",swfVersion:"unknown",jPlayerControllerId:undefined,delayedCommandId:undefined,isWaitingForPlay:false,isFileSet:false};b.jPlayer._diag={isPlaying:false,src:"",loadPercent:0,playedPercentRelative:0,playedPercentAbsolute:0,playedTime:0,totalTime:0};b.jPlayer._cssId={play:"jplayer_play",pause:"jplayer_pause",stop:"jplayer_stop",loadBar:"jplayer_load_bar",playBar:"jplayer_play_bar",volumeMin:"jplayer_volume_min",volumeMax:"jplayer_volume_max",volumeBar:"jplayer_volume_bar",volumeBarValue:"jplayer_volume_bar_value"};b.jPlayer.count=0;b.jPlayer.timeFormat={showHour:false,showMin:true,showSec:true,padHour:false,padMin:true,padSec:true,sepHour:":",sepMin:":",sepSec:""};b.jPlayer.convertTime=function(e){var c=new Date(e),f=c.getUTCHours();e=c.getUTCMinutes();c=c.getUTCSeconds();f=b.jPlayer.timeFormat.padHour&&f<10?"0"+f:f;e=b.jPlayer.timeFormat.padMin&&e<10?"0"+e:e;c=b.jPlayer.timeFormat.padSec&&c<10?"0"+c:c;return(b.jPlayer.timeFormat.showHour?f+b.jPlayer.timeFormat.sepHour:"")+(b.jPlayer.timeFormat.showMin?e+b.jPlayer.timeFormat.sepMin:"")+(b.jPlayer.timeFormat.showSec?c+b.jPlayer.timeFormat.sepSec:"")};b.jPlayer.prototype={_init:function(){var f=this,c=this.element;this.config=b.extend({},b.jPlayer.defaults,this.options,b.jPlayer._config);this.config.diag=b.extend({},b.jPlayer._diag);this.config.cssId={};this.config.cssSelector={};this.config.cssDisplay={};this.config.clickHandler={};this.element.data("jPlayer.config",this.config);b.extend(this.config,{id:this.element.attr("id"),swf:this.config.swfPath+(this.config.swfPath!=""&&this.config.swfPath.slice(-1)!="/"?"/":"")+"Jplayer.swf",fid:this.config.cssPrefix+"_flash_"+b.jPlayer.count,aid:this.config.cssPrefix+"_audio_"+b.jPlayer.count,hid:this.config.cssPrefix+"_force_"+b.jPlayer.count,i:b.jPlayer.count,volume:this._limitValue(this.config.volume,0,100),autobuffer:this.config.preload!="none"});b.jPlayer.count++;if(this.config.ready!=undefined){if(b.isFunction(this.config.ready)){this.jPlayerReadyCustom=this.config.ready}else{this._warning("Constructor's ready option is not a function.")}}this.config.audio=document.createElement("audio");this.config.audio.id=this.config.aid;b.extend(this.config,{canPlayMP3:!!(this.config.audio.canPlayType?""!=this.config.audio.canPlayType("audio/mpeg")&&"no"!=this.config.audio.canPlayType("audio/mpeg"):false),canPlayOGG:!!(this.config.audio.canPlayType?""!=this.config.audio.canPlayType("audio/ogg")&&"no"!=this.config.audio.canPlayType("audio/ogg"):false),aSel:b("#"+this.config.aid)});b.extend(this.config,{html5:!!(this.config.oggSupport?this.config.canPlayOGG?true:this.config.canPlayMP3:this.config.canPlayMP3)});b.extend(this.config,{usingFlash:!(this.config.html5&&this.config.nativeSupport),usingMP3:!(this.config.oggSupport&&this.config.canPlayOGG&&this.config.nativeSupport)});var l={setButtons:function(d,e){f.config.diag.isPlaying=e;if(f.config.cssId.play!=undefined&&f.config.cssId.pause!=undefined){if(e){f.config.cssSelector.play.css("display","none");f.config.cssSelector.pause.css("display",f.config.cssDisplay.pause)}else{f.config.cssSelector.play.css("display",f.config.cssDisplay.play);f.config.cssSelector.pause.css("display","none")}}if(e){f.config.isWaitingForPlay=false}}},k={setFile:function(e,h){try{f._getMovie().fl_setFile_mp3(h);f.config.autobuffer&&c.trigger("jPlayer.load");f.config.diag.src=h;f.config.isFileSet=true;c.trigger("jPlayer.setButtons",false)}catch(d){f._flashError(d)}},clearFile:function(){try{c.trigger("jPlayer.setButtons",false);f._getMovie().fl_clearFile_mp3();f.config.diag.src="";f.config.isFileSet=false}catch(d){f._flashError(d)}},load:function(){try{f._getMovie().fl_load_mp3()}catch(d){f._flashError(d)}},play:function(){try{f._getMovie().fl_play_mp3()&&c.trigger("jPlayer.setButtons",true)}catch(d){f._flashError(d)}},pause:function(){try{f._getMovie().fl_pause_mp3()&&c.trigger("jPlayer.setButtons",false)}catch(d){f._flashError(d)}},stop:function(){try{f._getMovie().fl_stop_mp3()&&c.trigger("jPlayer.setButtons",false)}catch(d){f._flashError(d)}},playHead:function(e,h){try{f._getMovie().fl_play_head_mp3(h)&&c.trigger("jPlayer.setButtons",true)}catch(d){f._flashError(d)}},playHeadTime:function(e,h){try{f._getMovie().fl_play_head_time_mp3(h)&&c.trigger("jPlayer.setButtons",true)}catch(d){f._flashError(d)}},volume:function(e,h){f.config.volume=h;try{f._getMovie().fl_volume_mp3(h)}catch(d){f._flashError(d)}}},j={setFile:function(e,h,d){f.config.diag.src=f.config.usingMP3?h:d;f.config.isFileSet&&!f.config.isWaitingForPlay&&c.trigger("jPlayer.pause");f.config.audio.autobuffer=f.config.autobuffer;f.config.audio.preload=f.config.preload;if(f.config.autobuffer){f.config.audio.src=f.config.diag.src;f.config.audio.load()}else{f.config.isWaitingForPlay=true}f.config.isFileSet=true;f.jPlayerOnProgressChange(0,0,0,0,0);clearInterval(f.config.jPlayerControllerId);if(f.config.autobuffer){f.config.jPlayerControllerId=window.setInterval(function(){f.jPlayerController(false)},100)}clearInterval(f.config.delayedCommandId)},clearFile:function(){f.setFile("","");f.config.isWaitingForPlay=false;f.config.isFileSet=false},load:function(){if(f.config.isFileSet){if(f.config.isWaitingForPlay){f.config.audio.autobuffer=true;f.config.audio.preload="auto";f.config.audio.src=f.config.diag.src;f.config.audio.load();f.config.isWaitingForPlay=false;clearInterval(f.config.jPlayerControllerId);f.config.jPlayerControllerId=window.setInterval(function(){f.jPlayerController(false)},100)}}},play:function(){if(f.config.isFileSet){if(f.config.isWaitingForPlay){f.config.audio.src=f.config.diag.src;f.config.audio.load()}f.config.audio.play();c.trigger("jPlayer.setButtons",true);clearInterval(f.config.jPlayerControllerId);f.config.jPlayerControllerId=window.setInterval(function(){f.jPlayerController(false)},100);clearInterval(f.config.delayedCommandId)}},pause:function(){if(f.config.isFileSet){f.config.audio.pause();c.trigger("jPlayer.setButtons",false);clearInterval(f.config.delayedCommandId)}},stop:function(){if(f.config.isFileSet){try{c.trigger("jPlayer.pause");f.config.audio.currentTime=0;clearInterval(f.config.jPlayerControllerId);f.config.jPlayerControllerId=window.setInterval(function(){f.jPlayerController(true)},100)}catch(d){clearInterval(f.config.delayedCommandId);f.config.delayedCommandId=window.setTimeout(function(){f.stop()},100)}}},playHead:function(e,h){if(f.config.isFileSet){try{c.trigger("jPlayer.load");if(typeof f.config.audio.buffered=="object"&&f.config.audio.buffered.length>0){f.config.audio.currentTime=h*f.config.audio.buffered.end(f.config.audio.buffered.length-1)/100}else{if(f.config.audio.duration>0&&!isNaN(f.config.audio.duration)){f.config.audio.currentTime=h*f.config.audio.duration/100}else{throw"e"}}c.trigger("jPlayer.play")}catch(d){c.trigger("jPlayer.play");c.trigger("jPlayer.pause");f.config.delayedCommandId=window.setTimeout(function(){f.playHead(h)},100)}}},playHeadTime:function(e,h){if(f.config.isFileSet){try{c.trigger("jPlayer.load");f.config.audio.currentTime=h/1000;c.trigger("jPlayer.play")}catch(d){c.trigger("jPlayer.play");c.trigger("jPlayer.pause");f.config.delayedCommandId=window.setTimeout(function(){f.playHeadTime(h)},100)}}},volume:function(d,e){f.config.volume=e;f.config.audio.volume=e/100;f.jPlayerVolume(e)}};this.config.usingFlash?b.extend(l,k):b.extend(l,j);for(var g in l){k="jPlayer."+g;this.element.unbind(k);this.element.bind(k,l[g])}if(this.config.usingFlash){if(this._checkForFlash(8)){if(b.browser.msie){g='<object id="'+this.config.fid+'"';g+=' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"';g+=' codebase="'+document.URL.substring(0,document.URL.indexOf(":"))+'://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"';g+=' type="application/x-shockwave-flash"';g+=' width="'+this.config.width+'" height="'+this.config.height+'">';g+="</object>";l=[];l[0]='<param name="movie" value="'+this.config.swf+'" />';l[1]='<param name="quality" value="high" />';l[2]='<param name="FlashVars" value="id='+escape(this.config.id)+"&fid="+escape(this.config.fid)+"&vol="+this.config.volume+'" />';l[3]='<param name="allowScriptAccess" value="always" />';l[4]='<param name="bgcolor" value="'+this.config.bgcolor+'" />';g=document.createElement(g);for(k=0;k<l.length;k++){g.appendChild(document.createElement(l[k]))}this.element.html(g)}else{l='<embed name="'+this.config.fid+'" id="'+this.config.fid+'" src="'+this.config.swf+'"';l+=' width="'+this.config.width+'" height="'+this.config.height+'" bgcolor="'+this.config.bgcolor+'"';l+=' quality="high" FlashVars="id='+escape(this.config.id)+"&fid="+escape(this.config.fid)+"&vol="+this.config.volume+'"';l+=' allowScriptAccess="always"';l+=' type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />';this.element.html(l)}}else{this.element.html("<p>Flash 8 or above is not installed. <a href='http://get.adobe.com/flashplayer'>Get Flash!</a></p>")}}else{this.config.audio.autobuffer=this.config.autobuffer;this.config.audio.preload=this.config.preload;this.config.audio.addEventListener("canplay",function(){var d=0.1*Math.random();f.config.audio.volume=(f.config.volume+(f.config.volume<50?d:-d))/100},false);this.config.audio.addEventListener("ended",function(){clearInterval(f.config.jPlayerControllerId);f.jPlayerOnSoundComplete()},false);this.element.append(this.config.audio)}this.element.css({position:this.config.position,top:this.config.top,left:this.config.left});if(this.config.graphicsFix){this.element.append('<div id="'+this.config.hid+'"></div>');b.extend(this.config,{hSel:b("#"+this.config.hid)});this.config.hSel.css({"text-indent":"-9999px"})}this.config.customCssIds||b.each(b.jPlayer._cssId,function(d,e){f.cssId(d,e)});if(!this.config.usingFlash){this.element.css({left:"-9999px"});window.setTimeout(function(){f.volume(f.config.volume);f.jPlayerReady()},100)}},jPlayerReady:function(c){if(this.config.usingFlash){this.config.swfVersion=c;this.config.swfVersionRequired!=this.config.swfVersion&&this._error("jPlayer's JavaScript / SWF version mismatch!\n\nJavaScript requires SWF : "+this.config.swfVersionRequired+"\nThe Jplayer.swf used is : "+this.config.swfVersion)}else{this.config.swfVersion="n/a"}this.jPlayerReadyCustom()},jPlayerReadyCustom:function(){},setFile:function(d,c){this.element.trigger("jPlayer.setFile",[d,c])},clearFile:function(){this.element.trigger("jPlayer.clearFile")},load:function(){this.element.trigger("jPlayer.load")},play:function(){this.element.trigger("jPlayer.play")},pause:function(){this.element.trigger("jPlayer.pause")},stop:function(){this.element.trigger("jPlayer.stop")},playHead:function(c){this.element.trigger("jPlayer.playHead",[c])},playHeadTime:function(c){this.element.trigger("jPlayer.playHeadTime",[c])},volume:function(c){c=this._limitValue(c,0,100);this.element.trigger("jPlayer.volume",[c])},cssId:function(f,c){var h=this;if(typeof c=="string"){if(b.jPlayer._cssId[f]){this.config.cssId[f]!=undefined&&this.config.cssSelector[f].unbind("click",this.config.clickHandler[f]);this.config.cssId[f]=c;this.config.cssSelector[f]=b("#"+c);this.config.clickHandler[f]=function(d){h[f](d);b(this).blur();return false};this.config.cssSelector[f].click(this.config.clickHandler[f]);var g=this.config.cssSelector[f].css("display");if(f=="play"){this.config.cssDisplay.pause=g}if(!(f=="pause"&&g=="none")){this.config.cssDisplay[f]=g;f=="pause"&&this.config.cssSelector[f].css("display","none")}}else{this._warning("Unknown/Illegal function in cssId\n\njPlayer('cssId', '"+f+"', '"+c+"')")}}else{this._warning("cssId CSS Id must be a string\n\njPlayer('cssId', '"+f+"', "+c+")")}},loadBar:function(d){if(this.config.cssId.loadBar!=undefined){var c=this.config.cssSelector.loadBar.offset();d=d.pageX-c.left;c=this.config.cssSelector.loadBar.width();this.playHead(100*d/c)}},playBar:function(c){this.loadBar(c)},onProgressChange:function(c){if(b.isFunction(c)){this.onProgressChangeCustom=c}else{this._warning("onProgressChange parameter is not a function.")}},onProgressChangeCustom:function(){},jPlayerOnProgressChange:function(f,c,j,i,g){this.config.diag.loadPercent=f;this.config.diag.playedPercentRelative=c;this.config.diag.playedPercentAbsolute=j;this.config.diag.playedTime=i;this.config.diag.totalTime=g;this.config.cssId.loadBar!=undefined&&this.config.cssSelector.loadBar.width(f+"%");this.config.cssId.playBar!=undefined&&this.config.cssSelector.playBar.width(c+"%");this.onProgressChangeCustom(f,c,j,i,g);this._forceUpdate()},jPlayerController:function(f){var c=0,l=0,k=0,j=0,g=0;if(this.config.audio.readyState>=1){c=this.config.audio.currentTime*1000;l=this.config.audio.duration*1000;l=isNaN(l)?0:l;k=l>0?100*c/l:0;if(typeof this.config.audio.buffered=="object"&&this.config.audio.buffered.length>0){j=100*this.config.audio.buffered.end(this.config.audio.buffered.length-1)/this.config.audio.duration;g=100*this.config.audio.currentTime/this.config.audio.buffered.end(this.config.audio.buffered.length-1)}else{j=100;g=k}}!this.config.diag.isPlaying&&j>=100&&clearInterval(this.config.jPlayerControllerId);f?this.jPlayerOnProgressChange(j,0,0,0,l):this.jPlayerOnProgressChange(j,g,k,c,l)},volumeMin:function(){this.volume(0)},volumeMax:function(){this.volume(100)},volumeBar:function(d){if(this.config.cssId.volumeBar!=undefined){var c=this.config.cssSelector.volumeBar.offset();d=d.pageX-c.left;c=this.config.cssSelector.volumeBar.width();this.volume(100*d/c)}},volumeBarValue:function(c){this.volumeBar(c)},jPlayerVolume:function(c){if(this.config.cssId.volumeBarValue!=null){this.config.cssSelector.volumeBarValue.width(c+"%");this._forceUpdate()}},onSoundComplete:function(c){if(b.isFunction(c)){this.onSoundCompleteCustom=c}else{this._warning("onSoundComplete parameter is not a function.")}},onSoundCompleteCustom:function(){},jPlayerOnSoundComplete:function(){this.element.trigger("jPlayer.setButtons",false);this.onSoundCompleteCustom()},getData:function(f){for(var c=f.split("."),h=this.config,g=0;g<c.length;g++){if(h[c[g]]!=undefined){h=h[c[g]]}else{this._warning("Undefined data requested.\n\njPlayer('getData', '"+f+"')");return}}return h},_getMovie:function(){return document[this.config.fid]},_checkForFlash:function(f){var c=false,h;if(window.ActiveXObject){try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+f);c=true}catch(g){}}else{if(navigator.plugins&&navigator.mimeTypes.length>0){if(h=navigator.plugins["Shockwave Flash"]){if(navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")>=f){c=true}}}}return c},_forceUpdate:function(){this.config.graphicsFix&&this.config.hSel.text(""+Math.random())},_limitValue:function(e,c,f){return e<c?c:e>f?f:e},_flashError:function(c){this._error("Problem with Flash component.\n\nCheck the swfPath points at the Jplayer.swf path.\n\nswfPath = "+this.config.swfPath+"\nurl: "+this.config.swf+"\n\nError: "+c.message)},_error:function(c){this.config.errorAlerts&&this._alert("Error!\n\n"+c)},_warning:function(c){this.config.warningAlerts&&this._alert("Warning!\n\n"+c)},_alert:function(c){alert("jPlayer "+this.config.version+" : id='"+this.config.id+"' : "+c)}}})(jQuery);