<!-- Hero Section with Live Stats -->
<%= ui_section padding: :sm do %>
  <%= ui_container do %>
    <div class="text-center">
      <h1 class="font-display text-5xl tracking-tight text-olive-950 sm:text-6xl lg:text-7xl dark:text-white">
        Discover Rare Vinyl
      </h1>
      <p class="mx-auto mt-4 max-w-2xl text-lg text-olive-600 dark:text-olive-400">
        Explore <%= number_with_delimiter(@stats[:records]) %> records •
        <%= number_with_delimiter(@stats[:artists]) %> artists •
        <%= number_with_delimiter(@stats[:labels]) %> labels
      </p>
      <div class="mt-6 flex flex-wrap items-center justify-center gap-4">
        <%= ui_button "Browse Collection", href: records_path, variant: :primary, size: :lg %>
        <%= ui_button "Discover", href: discovery_path, variant: :soft, size: :lg %>
      </div>
    </div>
  <% end %>
<% end %>

<!-- Shuffle Machine -->
<%= ui_section padding: :sm do %>
  <%= ui_container do %>
    <%= render "discovery/shuffle_machine" %>
  <% end %>
<% end %>

<!-- Daily Gems -->
<% if @daily_gems&.any? %>
  <section class="py-8 bg-gradient-to-b from-olive-100 to-olive-50 dark:from-olive-900 dark:to-olive-950">
    <%= ui_container do %>
      <div class="flex items-center justify-between mb-6">
        <div>
          <h2 class="font-display text-2xl text-olive-950 dark:text-white flex items-center gap-2">
            <svg class="w-6 h-6 text-amber-500" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
            Daily Gems
          </h2>
          <p class="text-olive-600 dark:text-olive-400 mt-1">Records with audio previews — click to play</p>
        </div>
        <span class="text-sm text-olive-500 dark:text-olive-400 hidden sm:block">
          <%= Date.current.strftime("%b %-d, %Y") %>
        </span>
      </div>
      <%= render "discovery/daily_gems_carousel", records: @daily_gems %>
    <% end %>
  </section>
<% end %>

<!-- Cover Wall -->
<% if @wall_records&.any? %>
  <section class="py-12 dark:bg-olive-950" data-controller="cover-wall">
    <%= ui_container do %>
      <div class="flex items-center justify-between mb-6">
        <div>
          <h2 class="font-display text-2xl text-olive-950 dark:text-white">Cover Wall</h2>
          <p class="text-olive-600 dark:text-olive-400 mt-1">Click any cover to explore</p>
        </div>
      </div>

      <div data-cover-wall-target="grid"
           class="grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 xl:grid-cols-10 gap-1 sm:gap-2">
        <% @wall_records.each do |record| %>
          <%= render "discovery/wall_cover", record: record %>
        <% end %>
      </div>
    <% end %>

    <!-- Quick View Modal -->
    <%= render "discovery/quick_view_modal" %>
  </section>
<% end %>

<!-- Explore Artists -->
<% if @top_artists&.any? || @random_artists&.any? || @hidden_gem_artists&.any? %>
  <%= ui_section do %>
    <%= ui_container do %>
      <% cache "landing_artist_carousel_#{Date.current}", expires_in: 1.day do %>
      <h2 class="font-display text-2xl text-olive-950 dark:text-white mb-6">Explore Artists</h2>
      <%= render "shared/discovery_carousel",
          popular_items: @top_artists,
          recent_items: @random_artists,
          hidden_gem_items: @hidden_gem_artists,
          item_path_helper: ->(item) { artist_path(item) },
          type: :artist,
          user_id: StaticController::COLLECTION_USER_ID,
          popular_label: "Top Artists",
          recent_label: "Random Picks",
          hidden_gem_label: "Hidden Gems",
          preloaded_covers: @artist_covers,
          show_collage: true %>
      <% end %>
    <% end %>
  <% end %>
<% end %>

<!-- User Status Section -->
<% if current_user.present? %>
  <%= ui_section padding: :sm do %>
    <%= ui_container do %>
      <%= ui_card padding: :lg, shadow: true do %>
        <div class="flex flex-wrap items-center justify-between gap-4">
          <div>
            <p class="text-sm text-olive-500 dark:text-olive-400">Signed in as</p>
            <p class="font-display text-xl text-olive-950 dark:text-white">
              <%= current_user.username %>
            </p>
            <p class="text-sm text-olive-600 dark:text-olive-400"><%= current_user.email %></p>
          </div>
          <div class="flex gap-3">
            <%= ui_button "Dashboard", href: records_path, variant: :primary %>
            <%= ui_button "Sign Out", href: users_sign_out_path, variant: :soft %>
          </div>
        </div>
      <% end %>
    <% end %>
  <% end %>
<% end %>

<!-- Collection Stats Footer -->
<section class="py-12 bg-olive-100 dark:bg-olive-900">
  <%= ui_container do %>
    <% cache "landing_stats_footer_#{Date.current}", expires_in: 1.day do %>
    <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
      <div class="group">
        <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-olive-200 dark:bg-olive-800 mb-3 group-hover:bg-olive-300 dark:group-hover:bg-olive-700 transition-colors">
          <svg class="w-6 h-6 text-olive-600 dark:text-olive-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"/>
          </svg>
        </div>
        <p class="font-display text-3xl text-olive-950 dark:text-white">
          <%= number_with_delimiter(@stats[:records]) %>
        </p>
        <p class="text-olive-600 dark:text-olive-400 mt-1">Records</p>
      </div>

      <div class="group">
        <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-olive-200 dark:bg-olive-800 mb-3 group-hover:bg-olive-300 dark:group-hover:bg-olive-700 transition-colors">
          <svg class="w-6 h-6 text-olive-600 dark:text-olive-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
          </svg>
        </div>
        <p class="font-display text-3xl text-olive-950 dark:text-white">
          <%= number_with_delimiter(@stats[:artists]) %>
        </p>
        <p class="text-olive-600 dark:text-olive-400 mt-1">Artists</p>
      </div>

      <div class="group">
        <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-olive-200 dark:bg-olive-800 mb-3 group-hover:bg-olive-300 dark:group-hover:bg-olive-700 transition-colors">
          <svg class="w-6 h-6 text-olive-600 dark:text-olive-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"/>
          </svg>
        </div>
        <p class="font-display text-3xl text-olive-950 dark:text-white">
          <%= number_with_delimiter(@stats[:labels]) %>
        </p>
        <p class="text-olive-600 dark:text-olive-400 mt-1">Labels</p>
      </div>

      <div class="group">
        <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-olive-200 dark:bg-olive-800 mb-3 group-hover:bg-olive-300 dark:group-hover:bg-olive-700 transition-colors">
          <svg class="w-6 h-6 text-olive-600 dark:text-olive-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15.536a5 5 0 001.414 1.414m2.828-9.9a9 9 0 012.828-2.828"/>
          </svg>
        </div>
        <p class="font-display text-3xl text-olive-950 dark:text-white">
          <%= number_with_delimiter(@stats[:with_audio]) %>
        </p>
        <p class="text-olive-600 dark:text-olive-400 mt-1">With Audio</p>
      </div>
    </div>
    <% end %>
  <% end %>
</section>
