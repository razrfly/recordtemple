<div class="mx-auto w-full max-w-2xl px-6 py-12 md:max-w-3xl lg:max-w-7xl lg:px-10">
  <%# Header %>
  <header class="mb-10 text-center">
    <h1 class="font-display text-4xl tracking-tight text-olive-950 sm:text-5xl">Explore Labels</h1>
    <p class="mt-3 text-lg text-olive-600">
      Discover <%= number_with_delimiter(@total_count) %> labels in the collection
    </p>
  </header>

  <%# Top Labels Section (only show when viewing all) %>
  <% if @current_letter.blank? && @top_labels.any? %>
    <section class="mb-12">
      <div class="flex items-center justify-between mb-6">
        <h2 class="font-display text-2xl text-olive-950 flex items-center gap-2">
          <svg class="w-6 h-6 text-amber-500" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
          </svg>
          Top Labels
        </h2>
      </div>

      <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
        <% @top_labels.each do |label| %>
          <%= render 'shared/discovery_card',
              item: label,
              path: label_path(label),
              type: :label,
              featured: true %>
        <% end %>
      </div>
    </section>

    <hr class="border-olive-200 mb-10">
  <% end %>

  <%# A-Z Navigation %>
  <%= render 'shared/az_navigation',
      base_path: ->(opts = {}) { labels_path(opts) },
      available_letters: @available_letters,
      current_letter: @current_letter %>

  <%# Current filter indicator %>
  <% if @current_letter.present? %>
    <div class="flex items-center justify-between mb-6">
      <h2 class="font-display text-xl text-olive-950">
        <% if @current_letter == "#" %>
          Labels starting with numbers or symbols
        <% else %>
          Labels starting with "<%= @current_letter %>"
        <% end %>
      </h2>
      <p class="text-sm text-olive-600">
        <%= number_with_delimiter(@pagy.count) %> labels
      </p>
    </div>
  <% else %>
    <div class="flex items-center justify-between mb-6">
      <h2 class="font-display text-xl text-olive-950">Browse All Labels</h2>
      <p class="text-sm text-olive-600">
        Sorted A-Z
      </p>
    </div>
  <% end %>

  <%# Labels Grid %>
  <% if @labels.any? %>
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4">
      <% @labels.each do |label| %>
        <%= render 'shared/discovery_card',
            item: label,
            path: label_path(label),
            type: :label %>
      <% end %>
    </div>

    <%# Pagination %>
    <div class="mt-12">
      <%= render 'shared/pagination', pagy: @pagy %>
    </div>
  <% else %>
    <div class="text-center py-16">
      <svg class="mx-auto w-16 h-16 text-olive-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
      </svg>
      <h3 class="mt-4 font-display text-lg text-olive-950">No labels found</h3>
      <p class="mt-2 text-olive-600">
        <% if @current_letter.present? %>
          No labels start with "<%= @current_letter == "#" ? "numbers or symbols" : @current_letter %>".
          <%= link_to "View all labels", labels_path, class: "text-olive-700 underline hover:text-olive-900" %>
        <% else %>
          No labels in the collection yet.
        <% end %>
      </p>
    </div>
  <% end %>
</div>
