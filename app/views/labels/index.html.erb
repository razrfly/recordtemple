<div class="mx-auto w-full max-w-2xl px-6 py-12 md:max-w-3xl lg:max-w-7xl lg:px-10">
  <%# Header %>
  <header class="mb-10 text-center">
    <h1 class="font-display text-4xl tracking-tight text-olive-950 sm:text-5xl">Explore Labels</h1>
    <p class="mt-3 text-lg text-olive-600">
      Discover <%= number_with_delimiter(@total_count) %> labels in the collection
    </p>
    <%= link_to random_labels_path,
        class: "inline-flex items-center gap-2 mt-5 px-4 py-2 text-sm font-medium text-olive-700 bg-olive-50 rounded-full border border-olive-200 hover:bg-olive-100 hover:border-olive-300 hover:text-olive-900 transition-all duration-200" do %>
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
      </svg>
      Surprise Me
    <% end %>
  </header>

  <%# Discovery Carousel Section (only show when viewing all) %>
  <% if @current_letter.blank? %>
    <%= render 'shared/discovery_carousel',
        popular_items: @popular_labels,
        recent_items: @recent_labels,
        hidden_gem_items: @hidden_gem_labels,
        item_path_helper: ->(item) { label_path(item) },
        type: :label,
        user_id: LabelsController::COLLECTION_USER_ID,
        popular_label: "Top Labels",
        recent_label: "Recently Added",
        hidden_gem_label: "Hidden Gems" %>
  <% end %>

  <%# A-Z Navigation %>
  <%= render 'shared/az_navigation',
      base_path: ->(opts = {}) { labels_path(opts) },
      available_letters: @available_letters,
      current_letter: @current_letter %>

  <%# Current filter indicator %>
  <% if @current_letter.present? %>
    <div class="flex items-center justify-between mb-6">
      <h2 class="font-display text-xl text-olive-950">
        <% if @current_letter == "#" %>
          Labels starting with numbers or symbols
        <% else %>
          Labels starting with "<%= @current_letter %>"
        <% end %>
      </h2>
      <p class="text-sm text-olive-600">
        <%= number_with_delimiter(@pagy.count) %> labels
      </p>
    </div>
  <% else %>
    <div class="flex items-center justify-between mb-6">
      <h2 class="font-display text-xl text-olive-950">Browse All Labels</h2>
      <p class="text-sm text-olive-600">
        Sorted A-Z
      </p>
    </div>
  <% end %>

  <%# Labels Grid %>
  <% if @labels.any? %>
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4">
      <% @labels.each do |label| %>
        <%= render 'shared/discovery_card',
            item: label,
            path: label_path(label),
            type: :label,
            user_id: LabelsController::COLLECTION_USER_ID,
            show_collage: true %>
      <% end %>
    </div>

    <%# Pagination %>
    <div class="mt-12">
      <%= render 'shared/pagination', pagy: @pagy %>
    </div>
  <% else %>
    <div class="text-center py-16">
      <svg class="mx-auto w-16 h-16 text-olive-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
      </svg>
      <h3 class="mt-4 font-display text-lg text-olive-950">No labels found</h3>
      <p class="mt-2 text-olive-600">
        <% if @current_letter.present? %>
          No labels start with "<%= @current_letter == "#" ? "numbers or symbols" : @current_letter %>".
          <%= link_to "View all labels", labels_path, class: "text-olive-700 underline hover:text-olive-900" %>
        <% else %>
          No labels in the collection yet.
        <% end %>
      </p>
    </div>
  <% end %>
</div>
