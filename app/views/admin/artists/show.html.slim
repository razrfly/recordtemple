- breadcrumb :show_artist, @artist

.page-title
  i.icon-custom-left
  h3
    span.semi-bold = @artist.name

.panel.panel-default.col-md-3
    .panel-heading
      .panel-title
        | Artist details
    .panel-body
      - if price_with_photo = @artist.prices.joins(:record => :photos).take
        = image_tag attachment_url(price_with_photo.record.photos.take, :image, :fill, 200, 200)
      table.table
        thead
          tr
            th
            th
        tbody
          tr.artist-row
            td
              strong Name
            td= @artist.name
          tr.artist-row
            td
              strong Freebase ID
            td= @artist.freebase_id

.col-md-9
  #artist-records
    .panel.panel-default
      .panel-heading
        .panel-title Your records
      .panel-body
        - if @records.size > 0
          table.table
            thead
              tr
                th Cover
                th Label
                th Genre
                th Record Format
                th Condition
                th.buttons
            tbody
              - @records.each do |record|
                tr.record-row
                  td= cover_link_for record
                  td= record.label.name
                  td= record.genre.name
                  td= record.record_format.name
                  td= record.get_condition
                  td.buttons
                    - if can? :read, record
                      = link_to icon('search fa-lg'), [:admin, record]
                    - if can? :update, record
                      = link_to icon('wrench fa-lg'), [:edit, :admin, record]
                    - if can? :destroy, record
                      = link_to icon('times fa-lg'), [:admin, record], :method => :delete, data: {confirm: 'Are you sure?'}
          = paginate @records, param_name: 'records_page', views_prefix: 'admin/'
          span.pull-right
            = page_entries_info @records
        - else
          p.text-center No records to show


  #artist-prices
    .panel.panel-default
      .panel-heading
        .panel-title Prices Index
      .panel-body
        table.table
          thead
            tr
              th Label
              th Record Format
              th Price range
              th Date range
              th.buttons
          tbody
            - @artist.prices.each do |price|
              tr.price-row
                td= price.label.name if price.label
                td= price.record_format.name
                td= price.price_range
                td= price.date_range
                td.buttons
                  - if can? :read, price
                    = link_to icon('search fa-lg'), [:admin, price]
                  - if can? :update, price
                    = link_to icon('wrench fa-lg'), [:edit, :admin, price]
                  - if can? :destroy, price
                    = link_to icon('times fa-lg'), [:admin, price], :method => :delete, data: {confirm: 'Are you sure?'}
        = paginate @prices, param_name: 'prices_page', views_prefix: 'admin/'
        span.pull-right
          = page_entries_info @prices
